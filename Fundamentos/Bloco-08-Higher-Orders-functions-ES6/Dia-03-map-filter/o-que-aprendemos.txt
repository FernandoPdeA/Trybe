O que vamos aprender?
Hoje voc√™ vai aprender sobre outras duas Higher Order Functions: Array.map e o Array.filter
A fun√ß√£o map √©, talvez, uma das mais poderosas (e complexas!) fun√ß√µes para manipula√ß√£o e cria√ß√£o de arrays. Em conjunto, essas HOFs deixar√£o seu c√≥digo mais leg√≠vel, conciso e expressivo.



Voc√™ ser√° capaz de:
Utilizar a fun√ß√£o Array.map para manipular e construir arrays;
Utilizar a fun√ß√£o Array.filter para filtrar um array;
Aprender a usar de forma conjunta as Higher Order Functions.



Por que isso √© importante?
Como j√° viu na primeira parte, as HOFs ajudam bastante a reduzir o c√≥digo e deix√°-lo mais compreens√≠vel. As HOFs de hoje s√£o um pouco mais complicadas, mas voc√™ usar√° elas bastante no seu c√≥digo daqui pra frente e logo estar√° tirando-as de letra!



Array.filter
O filter √© bem parecido com o find. O que o filter traz de novo √© que, em vez de retornar apenas um elemento do array, ele retornar√° outro array com todos os elementos que satisfa√ßam √† condi√ß√£o verificada pela fun√ß√£o. Assista a seguir o v√≠deo que explica como o m√©todo filter funciona.

A anima√ß√£o abaixo nos mostra como o filter pode ser utilizado para filtrar os valores maiores que vinte do array listaNumeros. Observe que o retorno da fun√ß√£o √© um novo array (maiorVinte) contendo os n√∫meros que passaram pelo filtro.

GIF m√©todo filter.
No exemplo abaixo, apenas substituiremos o find por filter.
Copiar
const numbers = [19, 21, 30, 3, 45, 22, 15];

const verifyEven = (number) => number % 2 === 0;

const isEven = numbers.filter(verifyEven);

console.log(isEven); // [ 30, 22 ]

// Outra forma de ser realizada sem a necessidade de criar uma nova fun√ß√£o.
const isEven2 = numbers.filter((number) => number % 2 === 0);

console.log(isEven2); // [ 30, 22 ]
Verifique que o retorno √© um novo array com os dois n√∫meros pares vindos do array numbers.
Observe este outro exemplo que busca os elementos atrav√©s da condi√ß√£o do filter. Neste caso, como resultado teremos pessoas que possuem idade menor que 18 anos, ou seja, que ainda n√£o podem dirigir:
Copiar
const objPeople = [
  { name: 'Jos√©', age: 21 },
  { name: 'Lucas', age: 19 },
  { name: 'Maria', age: 16 },
  { name: 'Gilberto', age: 18 },
  { name: 'Vitor', age: 15 },
];

const verifyAgeDrive = (arrayOfPeople) => (
  arrayOfPeople.filter((people) => (people.age < 18))
);

console.log(verifyAgeDrive(objPeople));
// [ { name: 'Maria', age: 16 }, { name: 'Vitor', age: 15 } ]
Outra forma de se usar o filter √© retornar um array sem o elemento desejado. √â preciso remover o Ricardo do objeto agora, j√° que ele n√£o √© mais um estudante.
Copiar
const arrayMyStudents = ['Maria', 'Manuela', 'Jorge', 'Ricardo', 'Wilson'];

const removeStudentByName = (name, listStudents) =>
  listStudents.filter((student) => student !== name);
  // Filtra todos os estudantes que n√£o t√™m o nome 'Ricardo' e retorna um array com eles. Na pr√°tica, remove o Ricardo do array.

const newListStudents = removeStudentByName('Ricardo', arrayMyStudents);
console.log(newListStudents); // [ 'Maria', 'Manuela', 'Jorge', 'Wilson' ]
Observe que o filter foi usado dentro de uma fun√ß√£o que recebe dois par√¢metros, o array de valores e uma string, o que ser√° removido. A condi√ß√£o de dentro do filter √© para retornar sempre que o elemento for diferente do name passado. Se tiver ficado confuso, rode esse c√≥digo por conta pr√≥pria e altere um pouco o seu funcionamento! Isso ajudar√° muito.



Array.map
A fun√ß√£o map possui a mesma estrutura das outras HOFs, o que muda √© o seu retorno.
Antes de mais nada, veja mais um v√≠deo, desta vez falando sobre o map.

Veja a diferen√ßa entre fazer uma mesma fun√ß√£o usando for e em seguida usando map:
Copiar
const persons = [
  { firstName: 'Maria', lastName: 'Ferreira' },
  { firstName: 'Jo√£o', lastName: 'Silva' },
  { firstName: 'Antonio', lastName: 'Cabral' },
];

const fullNames = [];

for (let index = 0; index < persons.length; index += 1) {
  fullNames.push(`${persons[index].firstName} ${persons[index].lastName}`);
}

console.log(fullNames);
Agora com a fun√ß√£o map:
Copiar
const persons = [
  { firstName: 'Maria', lastName: 'Ferreira' },
  { firstName: 'Jo√£o', lastName: 'Silva' },
  { firstName: 'Antonio', lastName: 'Cabral' },
];

const fullNames = persons.map((person) => `${person.firstName} ${person.lastName}`);

console.log(fullNames); // [ 'Maria Ferreira', 'Jo√£o Silva', 'Antonio Cabral' ]
O for foi substitu√≠do por apenas uma linha de c√≥digo.
A fun√ß√£o juntou o primeiro nome com o sobrenome de cada pessoa e retornou um array novo com cada um dos valores. Observe que o tamanho dos arrays persons e fullNames √© o mesmo (3 elementos).
Outro exemplo √© o de realizar um c√°lculo utilizando os valores dos elementos e retornar um array novo sem alterar o anterior.
Na anima√ß√£o abaixo, podemos observar que o m√©todo map est√° invocando uma fun√ß√£o callback que multiplica cada elemento do array listaNumeros por dois. O retorno do map √© um novo array (dobro) que cont√©m o resultado da multiplica√ß√£o de cada elemento do array listaNumeros por dois. Perceba que o array retornado tem exatamente a mesma quantidade de itens que o array original, que n√£o sofreu nenhuma modifica√ß√£o!

GIF m√©todo map.
Vamos praticar um outro exemplo num√©rico, para fixar bem o que o map faz. Suponha que √© preciso transformar todos os n√∫meros em negativos e passa-l√≥s para um array novo.
Copiar
const numbers = [1, 2, 3, 4, -5];

const negativeNumbers = numbers.map((number) => ((number > 0) ? number * (-1) : number));

console.log(negativeNumbers); // [ -1, -2, -3, -4, -5 ]
console.log(numbers); // [ 1, 2, 3, 4, -5 ]
E como seria apenas com for?
Copiar
const numbers = [1, 2, 3, 4, -5];

const negativeNumbers = [];
for (let index = 0; index < numbers.length; index += 1) {
  if (numbers[index] > 0) {
    negativeNumbers.push(numbers[index] * -1);
  } else {
    negativeNumbers.push(numbers[index]);
  }
}

console.log(negativeNumbers); // [ -1, -2, -3, -4, -5 ]
console.log(numbers); // [ 1, 2, 3, 4, -5 ]
Outras formas de usar o .map √© unir dois arrays para criar um novo. Considere que voc√™ possui duas listas: o pre√ßo do primeiro produto (Arroz) √© o primeiro elemento da lista prices (2.99), e assim por diante:
Copiar
const products = ['Arroz', 'Feij√£o', 'Alface', 'Tomate'];
const prices = [2.99, 3.99, 1.5, 2];
Deseja-se junt√°-las em apenas uma lista de objetos que fique dessa forma:
Copiar
const listProducts = [{ Arroz: 2.99 },...]
Tente criar uma fun√ß√£o que resolva esse problema. Lembre-se, tamb√©m, que as fun√ß√µes passadas para as HOFs podem receber v√°rios par√¢metros, n√£o s√≥ o elemento sobre o qual ela est√° sendo iterada! Use isso em seu favor. Caso tenha d√∫vidas, olhe a solu√ß√£o logo abaixo.
Copiar
const products = ['Arroz', 'Feijao', 'Alface', 'Tomate'];

const prices = [2.99, 3.99, 1.5, 2];

const updateProducts = (listProducts, listPrices) => listProducts.map((product, index) => (
  { [product]: listPrices[index] }
));

const listProducts = updateProducts(products, prices);
console.log(listProducts);
// => [
//   { Arroz: 2.99 },
//   { Feijao: 3.99 },
//   { Alface: 1.5 },
//   { Tomate: 2 },
// ]
E antes de seguir em diante, uma pergunta que provavelmente lhe veio! Qual a diferen√ßa, afinal, de map para o forEach? S√£o duas principais:
O map aplica sobre os elementos de um array uma fun√ß√£o e retorna um array novo, sem modificar o original;
A forEach n√£o tem tal restri√ß√£o. Ela pode modificar o array original e retorna nada por padr√£o - ela pode criar um array novo a partir de um antigo, pode simplesmente buscar por um elemento e retorn√°-lo, pode n√£o retornar nada, enfim! Ela √© gen√©rica e pode fazer diversas coisas.
Ficou mais claro? Em caso de d√∫vidas, pense neste exemplo:
Copiar
const numeros = [1, 2, 3, 4, 5, 6];
console.log(numeros.map((numero) => numero * 2)); // Retorno: [2, 4, 6, 8, 10, 12]

const paresMenoresQueCinco = [];
numeros.forEach((numero) => {
  if (numero < 5 && numero % 2 === 0) {
    paresMenoresQueCinco.push(numero);
  }
});
console.log(paresMenoresQueCinco); // Retorno: [2, 4]
Pense sempre que o forEach faz com arrays o que as outras HOFs n√£o conseguem fazer. Ele √© gen√©rico!
Agora, hora de ver como pode-se usar as outras HOFs junto com o map. Para os exemplos a seguir ser√° usado um array com os dados de estudantes de um col√©gio.
Copiar
const estudantes = [
  {
    nome: 'Jorge',
    sobrenome: 'Silva',
    idade: 14,
    turno: 'Manh√£',
    materias: [
      { name: 'Matem√°tica', nota: 67 },
      { name: 'Portugu√™s', nota: 79 },
      { name: 'Qu√≠mica', nota: 70 },
      { name: 'Biologia', nota: 65 },
    ],
  },
  {
    nome: 'Mario',
    sobrenome: 'Ferreira',
    idade: 15,
    turno: 'Tarde',
    materias: [
      { name: 'Matem√°tica', nota: '59' },
      { name: 'Portugu√™s', nota: '80' },
      { name: 'Qu√≠mica', nota: '78' },
      { name: 'Biologia', nota: '92' },
    ],
  },
  {
    nome: 'Jorge',
    sobrenome: 'Santos',
    idade: 15,
    turno: 'Manh√£',
    materias: [
      { name: 'Matem√°tica', nota: '76' },
      { name: 'Portugu√™s', nota: '90' },
      { name: 'Qu√≠mica', nota: '70' },
      { name: 'Biologia', nota: '80' },
    ],
  },
  {
    nome: 'Maria',
    sobrenome: 'Silveira',
    idade: 14,
    turno: 'Manh√£',
    materias: [
      { name: 'Matem√°tica', nota: '91' },
      { name: 'Portugu√™s', nota: '85' },
      { name: 'Qu√≠mica', nota: '92' },
      { name: 'Biologia', nota: '90' },
    ],
  },
  {
    nome: 'Natalia',
    sobrenome: 'Castro',
    idade: 14,
    turno: 'Manh√£',
    materias: [
      { name: 'Matem√°tica', nota: '70' },
      { name: 'Portugu√™s', nota: '70' },
      { name: 'Qu√≠mica', nota: '60' },
      { name: 'Biologia', nota: '50' },
    ],
  },
  {
    nome: 'Wilson',
    sobrenome: 'Martins',
    idade: 14,
    turno: 'Manh√£',
    materias: [
      { name: 'Matem√°tica', nota: '80' },
      { name: 'Portugu√™s', nota: '82' },
      { name: 'Qu√≠mica', nota: '79' },
      { name: 'Biologia', nota: '75' },
    ],
  },
];
Segue-se alguns exemplos de fun√ß√µes apenas usando for e depois como refator√°-las para quem usem HOFs.
Fun√ß√£o para buscar e imprimir o nome completo de todos os estudantes que estudam no turno da manh√£.
Copiar
const allNameStudents = [];

for (let index = 0; index < estudantes.length; index += 1 ) {
  if(estudantes[index].turno === 'Manh√£') {
    allNameStudents.push(`${estudantes[index].nome} ${estudantes[index].sobrenome}`)
  }
}

console.log(allNameStudents);
Com map e filter.
Copiar
const allNameStudents = estudantes.filter((estudante) => (
  estudante.turno === 'Manh√£')).map((estudante) => `${estudante.nome} ${estudante.sobrenome}`);

console.log(allNameStudents);
O que foi feito? Primeiro usou-se o filter para filtrar todos os estudantes que estudam no per√≠odo da manh√£. Como o retorno do filter √© um array de elementos, voc√™ pode usar o map logo em seguida para retornar os nomes completos de estudantes presentes nesse novo array. O map nesse caso √© usado apenas para retornar as informa√ß√µes pedidas, o nome completo, enquanto o filter √© usado para filtrar o array.
Agora vamos usar um map com um find.
Buscar um estudante pelo nome e retornar a situa√ß√£o dele em cada mat√©ria:
Apenas com for:
Copiar
const findStudent = (name, students) => {
  for (let index = 0; index < students.length; index += 1) {
    if (students[index].nome === name) {
      return students[index];
    }
  }
};

const reportStatus = (name, students) => {
  const getStudent = findStudent(name, students);
  const report = [];
  for (let index = 0; index < getStudent.materias.length; index += 1) {
    if (getStudent.materias[index].nota >= 60) {
      report.push(`${getStudent.materias[index].name} Aprovado`);
    } else {
      report.push(`${getStudent.materias[index].name} Reprovado`);
    }
  }
  return report;
};

console.log(reportStatus('Natalia', estudantes));
Com find e map:
Copiar
const reportStatus = (name, students) => {
  const studentInfo = students.find((student) => student.nome === name);
  return studentInfo.materias.map((materia) => (
    `${materia.name} ${(materia.nota >= 60) ? 'Aprovado' : 'Reprovado'}`
  ));
};

console.log(reportStatus('Natalia', estudantes));
O c√≥digo teve uma redu√ß√£o dr√°stica no n√∫mero de linhas! Primeiro, fizemos um find para buscar e retornar os dados do estudante. O objeto foi retornado e salvo na vari√°vel studentsInfo, depois o map foi usado para percorrer as mat√©rias do objeto retornado e salvar o que se queria em um array da forma desejada.
Relembre algumas HOFs com a imagem a seguir:





Vamos praticar!
√â hora de colocar em pr√°tica todo esse conhecimento. üí™ Vamos ver alguns exemplos de como aplicar o map e filter.
Aula ao vivo! Vamos para o Slack onde o link estar√° dispon√≠vel.



Vamos praticar!
√â hora de colocar em pr√°tica todo esse conhecimento. üí™ Vamos ver alguns exemplos de como aplicar o map e filter.
Aula ao vivo! Vamos para o Slack onde o link estar√° dispon√≠vel.



Agora a pr√°tica
Para os exerc√≠cios propostos use o seguinte template:
Copiar
const books = [
  {
    id: 1,
    name: 'As Cr√¥nicas de Gelo e Fogo',
    genre: 'Fantasia',
    author: {
      name: 'George R. R. Martin',
      birthYear: 1948,
    },
    releaseYear: 1991,
  },
  {
    id: 2,
    name: 'O Senhor dos An√©is',
    genre: 'Fantasia',
    author: {
      name: 'J. R. R. Tolkien',
      birthYear: 1892,
    },
    releaseYear: 1954,
  },
  {
    id: 3,
    name: 'Funda√ß√£o',
    genre: 'Fic√ß√£o Cient√≠fica',
    author: {
      name: 'Isaac Asimov',
      birthYear: 1920,
    },
    releaseYear: 1951,
  },
  {
    id: 4,
    name: 'Duna',
    genre: 'Fic√ß√£o Cient√≠fica',
    author: {
      name: 'Frank Herbert',
      birthYear: 1920,
    },
    releaseYear: 1965,
  },
  {
    id: 5,
    name: 'A Coisa',
    genre: 'Terror',
    author: {
      name: 'Stephen King',
      birthYear: 1947,
    },
    releaseYear: 1986,
  },
  {
    id: 6,
    name: 'O Chamado de Cthulhu',
    genre: 'Terror',
    author: {
      name: 'H. P. Lovecraft',
      birthYear: 1890,
    },
    releaseYear: 1928,
  },
];

// Adicione o c√≥digo do exerc√≠cio aqui:
üöÄ 1 - Crie um array com strings no formato NOME_DO_LIVRO - G√äNERO_DO_LIVRO - NOME_DA_PESSOA_AUTORA
Dica: Use a fun√ß√£o map
Copiar
const expectedResult = [
  'As Cr√¥nicas de Gelo e Fogo - Fantasia - George R. R. Martin',
  'O Senhor dos An√©is - Fantasia - J. R. R. Tolkien',
  'Funda√ß√£o - Fic√ß√£o Cient√≠fica - Isaac Asimov',
  'Duna - Fic√ß√£o Cient√≠fica - Frank Herbert',
  'A Coisa - Terror - Stephen King',
  'O Chamado de Cthulhu - Terror - H. P. Lovecraft',
];

function formatedBookNames() {
  // escreva seu c√≥digo aqui
}
üöÄ 2 - Construa um array de objetos a partir do array de livros. Cada objeto deve conter uma propriedade author, com o nome da pessoa autora do livro, e uma propriedade age com a idade dessa pessoa quando o livro foi lan√ßado. O array deve ser ordenado por idade, ou seja, da pessoa mais jovem para a mais velha considerando suas idades quando o livro foi lan√ßado.
Dica: use as fun√ß√µes map, sort
Copiar
const expectedResult = [
  {
    age: 31,
    author: 'Isaac Asimov',
  },
  {
    age: 38,
    author: 'H. P. Lovecraft',
  },
  {
    age: 39,
    author: 'Stephen King',
  },
  {
    age: 43,
    author: 'George R. R. Martin',
  },
  {
    age: 45,
    author: 'Frank Herbert',
  },
  {
    age: 62,
    author: 'J. R. R. Tolkien',
  },
];

function nameAndAge() {
  // escreva seu c√≥digo aqui
}
üöÄ 3 - Crie um array com todos os objetos que possuem g√™nero fic√ß√£o cient√≠fica ou fantasia.
Dica: use a fun√ß√£o filter;
Copiar
const expectedResult = [
  {
    id: 1,
    name: 'As Cr√¥nicas de Gelo e Fogo',
    genre: 'Fantasia',
    author: { name: 'George R. R. Martin', birthYear: 1948 },
    releaseYear: 1991
  },
  {
    id: 2,
    name: 'O Senhor dos An√©is',
    genre: 'Fantasia',
    author: { name: 'J. R. R. Tolkien', birthYear: 1892 },
    releaseYear: 1954
  },
  {
    id: 3,
    name: 'Funda√ß√£o',
    genre: 'Fic√ß√£o Cient√≠fica',
    author: { name: 'Isaac Asimov', birthYear: 1920 },
    releaseYear: 1951
  },
  {
    id: 4,
    name: 'Duna',
    genre: 'Fic√ß√£o Cient√≠fica',
    author: { name: 'Frank Herbert', birthYear: 1920 },
    releaseYear: 1965
  }
];

function fantasyOrScienceFiction() {
  // escreva seu c√≥digo aqui
}
üöÄ 4 - Crie um array formado pelos livros com mais de 60 anos desde sua publica√ß√£o. Esse array deve ser ordenado do livro mais velho ao mais novo.
Dica: use as fun√ß√µes filter e sort
Copiar
const expectedResult = [
  {
    id: 6,
    name: 'O Chamado de Cthulhu',
    genre: 'Terror',
    author: { name: 'H. P. Lovecraft', birthYear: 1890 },
    releaseYear: 1928,
  },
  {
    id: 3,
    name: 'Funda√ß√£o',
    genre: 'Fic√ß√£o Cient√≠fica',
    author: { name: 'Isaac Asimov', birthYear: 1920 },
    releaseYear: 1951,
  },
  {
    id: 2,
    name: 'O Senhor dos An√©is',
    genre: 'Fantasia',
    author: { name: 'J. R. R. Tolkien', birthYear: 1892 },
    releaseYear: 1954,
  },
];

function oldBooksOrdered() {
  // escreva seu c√≥digo aqui
}
üöÄ 5 - Crie um array em ordem alfab√©tica apenas com os nomes de todas as pessoas autoras de fic√ß√£o cient√≠fica ou fantasia.
Copiar
const expectedResult = [
  'Frank Herbert',
  'George R. R. Martin',
  'Isaac Asimov',
  'J. R. R. Tolkien',
];

function fantasyOrScienceFictionAuthors() {
  // escreva seu c√≥digo aqui
}
üöÄ 6 - Crie um array com o nome de todos os livros com mais de 60 anos de publica√ß√£o.
Copiar
const expectedResult = [
  'O Senhor dos An√©is',
  'Funda√ß√£o',
  'O Chamado de Cthulhu',
];

function oldBooks() {
  // escreva seu c√≥digo aqui
}
üöÄ 7 - Encontre o nome do livro escrito pela pessoa cujo nome registrado come√ßa com tr√™s iniciais.
Dica: cada inicial termina com um ponto.
Copiar
const expectedResult = 'O Senhor dos An√©is';

function authorWith3DotsOnName() {
  // escreva seu c√≥digo aqui
}



